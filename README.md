# ccDownloader
Automate card download from Card Conjurer

## Summary
[ccDownloader](https://github.com/matthewddunlap/ccDownloader) takes a `.cardconjurer` file generated by [scry2cc](https://github.com/matthewddunlap/scry2cc) and downalods the card images from a Card Conjurer instance as PNG files to the specified `--output` directory whic is then used as input via `--png-dir` to [MtgPng2Pdf](https://github.com/matthewddunlap/MtgPng2Pdf).

## Requirements
On Debian 12 install requried package
```
sudo apt install chromium chromium-driver jq python3-lxml python3-natsort python3-pil python3-reportlab python3-requests python3-selenium
```

## Examples
### Use publicly accessible Card Conjurer https://cardconjurer.app/ by default
```
python3 ccDownloader.py --headless --auto-fit-art --auto-fit-set-symbol --frame m15ub --output card_images/m15ub --file myDeck.cardcojurer
```

### Use self-hosted Card Conjurer via docker https://github.com/Investigamer/cardconjurer
```
python3 ccDownloader.py --headless --auto-fit-art --auto-fit-set-symbol --frame m15ub --output card_images/m15ub --file myDeck.cardcojurer --url http://mtgproxy:4242
```

### Errors
If ccDownloader fails to capture the canvas for a card it will be listed at the end of the log. For each card copy it's name (which includes the set and collector number delimited with underscores) in to a new file names keylist.txt and put each on a new line. Then execute the following to generate a new `.cardconjurer` file to re-download the missing card images.
```
jq --argfile keys <(jq -R . keylist.txt | jq -s 'map(.)') ' .[] | select(.key as $k | $keys | index($k)) ' myDeck.cardconjurer | jq -s . > myDeck-failed.cardconjurer
```
